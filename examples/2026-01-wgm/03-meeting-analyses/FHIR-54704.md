# FHIR-54704: ActorDefinition - Reference to Profile Canonical

## Issue Overview

This ballot comment requests allowing ActorDefinition to explicitly reference a profile (canonical URL) that represents entities which are of that actor type.

The use case is that in many implementations, actors are distinguished by profiles rather than resource types. For example, both "Hospital" and "Social Insurance Organization" might be Organization resources, but they're differentiated by conforming to different profiles. The commenter wants ActorDefinition to formally link to these profiles.

## Current State

ActorDefinition currently has:
- `type` - code (person | system) indicating the general actor category
- `capabilities` - canonical(CapabilityStatement) for what the actor can do
- `derivedFrom` - canonical(ActorDefinition) for specialization
- Various documentation elements (description, documentation, etc.)

There is NO element to specify which profile(s) an actor instance should conform to.

The request would enable: 
- ActorDefinition "Hospital Actor" references Hospital Organization Profile
- Any Organization conforming to Hospital Organization Profile = Hospital Actor

## Stakeholder Perspectives

**Anja Schwab (Reporter)**: Sees this as essential for real-world use cases where actor identification is profile-based rather than resource-type-based.

No comments on the issue yet.

## Related Issues & Discussions

### Related Jira Issues
- **FHIR-37482** (Published): Original "Create an ActorDefinition resource" - established the resource
- **FHIR-42808** (Applied): PlanDefinition.actor should leverage ActorDefinition - shows growing adoption
- **FHIR-46730** (Published): IPA actors discussion about client/server terminology

### ActorDefinition Usage
ActorDefinition is relatively new (R5) and is being adopted by IGs:
- IPA defines client/server actors
- AU uses ActorDefinitions extensively
- ExampleScenario links to ActorDefinitions

## Technical Considerations

1. **Profile as Actor Identity**:
   - Makes sense for organizational actors (Hospital vs Pharmacy vs Payer)
   - Less clear for system/software actors
   - Would enable automated actor identification based on profile conformance

2. **Cardinality Question**:
   - Should be 0..* since actor might be represented by multiple profiles
   - Or should it be 0..1 with multiple ActorDefinitions for variations?

3. **Datatype Options**:
   - canonical(StructureDefinition) - direct reference to profile
   - Could also allow canonical(Resource) for broader applicability

4. **Validation Implications**:
   - Would enable: "Is this instance acting as Actor X?" â†’ Check if it conforms to referenced profiles
   - Tooling would need to understand this linkage

5. **Current Workaround**:
   - Can document profiles in `documentation` element, but not machine-processable
   - Can create extensions, but not standardized

6. **Relationship to capabilities**:
   - `capabilities` (CapabilityStatement) describes what actor CAN DO
   - Proposed `profile` would describe what actor IS (structural conformance)

## Potential Courses of Action

### Option A: Add profile Element
- **Description**: Add `ActorDefinition.profile` as 0..* canonical(StructureDefinition) with definition "Profile(s) that instances of this actor type should conform to"
- **Pros**: Clear semantics; enables automated actor identification; follows canonical pattern
- **Cons**: Conflates structural conformance with actor role; may not apply to all actor types
- **Impact**: Low - additive element

### Option B: Add representation Element (broader)
- **Description**: Add element allowing canonical to StructureDefinition OR Resource patterns, describing how to identify instances of this actor
- **Pros**: More flexible; handles various identification mechanisms
- **Cons**: More complex semantics; harder to validate
- **Impact**: Medium - new concept

### Option C: Use Extension
- **Description**: Define standard extension for profile reference rather than core element
- **Pros**: Non-breaking; can be adopted incrementally; tests concept before promotion
- **Cons**: Less discoverable; not part of base; inconsistent with other elements
- **Impact**: Low - extension only

### Option D: Not Persuasive - Document in Narrative
- **Description**: Reject; profiles should be documented in documentation element; actor identity is behavioral not structural
- **Pros**: No spec change; keeps ActorDefinition focused on capabilities
- **Cons**: Not machine-processable; doesn't address use case
- **Impact**: None - status quo

## Questions for the Workgroup

1. Is profile conformance a valid way to identify actor instances?

2. Should this apply to both person and system actors, or primarily one type?

3. What's the relationship between this proposed element and `capabilities` (CapabilityStatement)?

4. Are there IGs already doing this with extensions that could inform the design?

5. Should the element allow identifying profiles by criteria other than canonical URL?

6. How would this interact with ExampleScenario.actor.definition linkages?

## References

- Jira Issue: https://jira.hl7.org/browse/FHIR-54704
- ActorDefinition: https://hl7.org/fhir/6.0.0-ballot4/actordefinition.html
- Original ActorDefinition creation: https://jira.hl7.org/browse/FHIR-37482
- IPA actors example: https://jira.hl7.org/browse/FHIR-46730
