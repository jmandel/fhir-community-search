# FHIR-53684: Add "abstract" flag to ImplementationGuide

## Issue Overview

Cooper Thompson (Epic) proposes adding a mechanism to identify Implementation Guides that are not meant to be directly implemented, but rather serve as building blocks for derivative IGs to inherit from. He draws an analogy to the `abstract` keyword in C# and other programming languages.

Examples of such "abstract" IGs include:
- **Clinical Order Workflow (COW)**: Provides patterns for other ordering IGs
- **National "base" IGs**: Define country-level constraints that specific regional IGs inherit from
- **SMARTv2 scopes**: Specifications meant to be adopted/profiled, not implemented directly

The goal is to help implementers distinguish between content they should implement directly versus content that serves as a foundation for other specifications.

## Current State

Currently, there is no standard way to indicate that an ImplementationGuide (or related artifact) is "abstract" or intended only as a base for derivation:

- **ImplementationGuide resource**: Has no flag for this purpose
- **StructureDefinition.abstract**: Exists but applies to profiles, not IGs
- **Convention**: Some IGs use naming (e.g., "-base") but this is inconsistent
- **Description text**: Some IGs explain their purpose in narrative, but this isn't machine-readable

The issue also acknowledges that some "abstract" specifications don't use the ImplementationGuide resource at all (e.g., SMARTv2 scopes), so the solution may need to be broader.

## Stakeholder Perspectives

**Reporter (Cooper Thompson, Epic):** Wants clear signaling for implementers about what content should be directly implemented vs. used as a base. This affects how Epic and other large implementers prioritize their conformance work.

No other comments have been posted yet.

## Related Issues & Discussions

### Conceptual Parallels
- **StructureDefinition.abstract**: Profiles can already be marked as abstract
- **CapabilityStatement.kind**: Has `capability`, `requirements`, `instance` to distinguish intent
- **Artifact lifecycle**: FMM levels indicate maturity but not "abstractness"

### Zulip Discussions
- No specific discussions found about abstract ImplementationGuides
- Discussions exist about IG inheritance and derivation patterns

## Technical Considerations

1. **ImplementationGuide Scope**: An IG is a collection of artifacts - should "abstract" apply to the whole IG or individual artifacts?

2. **Artifact Granularity**: Many artifacts within an IG might be concrete while others are abstract bases

3. **Registry/Discovery**: How would registries (like FHIR IG Registry) use this flag?

4. **Non-IG Specifications**: SMARTv2 scopes and similar specifications don't use ImplementationGuide resource - need broader solution

5. **Inheritance Model**: FHIR IG inheritance is complex - profiles derive from profiles, IGs depend on IGs

6. **Terminology**: "Abstract" has specific meaning in OO languages - is it the right term for this concept?

## Potential Courses of Action

### Option A: Add Abstract Flag to ImplementationGuide
- **Description**: Add `ImplementationGuide.abstract : boolean` to indicate the IG is not meant for direct implementation
- **Pros**: 
  - Simple, clear solution
  - Directly addresses the request
  - Easy to implement and validate
- **Cons**: 
  - Boolean may be too simplistic (what about "partially abstract"?)
  - Doesn't address non-IG specifications
  - Doesn't distinguish artifact-level vs IG-level abstractness
- **Impact**: Low complexity, addresses main use case

### Option B: Add Purpose/Intent CodeableConcept
- **Description**: Add `ImplementationGuide.purpose` or similar with a value set including: `base`, `implementation`, `template`, `example`, etc.
- **Pros**: 
  - More expressive than boolean
  - Can capture nuanced intent
  - Extensible via value set
- **Cons**: 
  - More complex to implement
  - Requires defining and maintaining value set
  - May be over-engineered for the use case
- **Impact**: Medium complexity, more future-proof

### Option C: Use Extension
- **Description**: Define a standard extension for this purpose rather than adding to the core resource
- **Pros**: 
  - No core spec change needed
  - Can be adopted incrementally
  - Extension can apply to other resources too
- **Cons**: 
  - Less visible than core element
  - May not be consistently adopted
  - Requires extension publication
- **Impact**: Low spec impact, flexible adoption

### Option D: Documentation/Naming Convention
- **Description**: Establish best practice documentation that abstract IGs should be named with "-base" or similar suffix and describe their purpose clearly
- **Pros**: 
  - No spec change needed
  - Human-readable
  - Immediate to adopt
- **Cons**: 
  - Not machine-readable
  - Relies on voluntary adoption
  - Inconsistent enforcement
- **Impact**: No spec change, limited effectiveness

### Option E: Artifact-Level Marking
- **Description**: Rather than marking IGs, mark individual artifacts (profiles, etc.) as abstract, and let the IG be abstract if all its artifacts are abstract
- **Pros**: 
  - Finer-grained control
  - StructureDefinition.abstract already exists as model
  - More accurate representation of reality
- **Cons**: 
  - Doesn't address IG-level intent
  - Mixed IGs (some abstract, some concrete) common
  - More complex to evaluate
- **Impact**: Uses existing patterns, may miss use case

## Questions for the Workgroup

1. Is "abstract" the right concept, or is this more about "base/derived" relationships?

2. Should this apply at the IG level, artifact level, or both?

3. How should registries and discovery services use this information?

4. What value set would be appropriate if we use a coded element rather than boolean?

5. Should there be a parallel element for CapabilityStatement or other conformance resources?

6. How do we address specifications like SMARTv2 that don't use ImplementationGuide?

7. Would this change behavior of any tooling (publisher, validator, etc.)?

## References

- Jira: https://jira.hl7.org/browse/FHIR-53684
- ImplementationGuide resource: https://build.fhir.org/implementationguide.html
- StructureDefinition.abstract: https://build.fhir.org/structuredefinition-definitions.html#StructureDefinition.abstract
- C# abstract keyword: https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/abstract
- Clinical Order Workflow IG: Example of a "base" IG
