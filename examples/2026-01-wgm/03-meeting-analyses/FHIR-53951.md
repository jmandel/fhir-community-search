# FHIR-53951: All functions/features should have examples, return and argument types/cardinality should be explicit

## Issue Overview

Brian Postlethwaite has identified significant documentation gaps in the FHIRPath specification page. The request is for comprehensive documentation improvements including: (1) adding examples with expected results for all functions, (2) explicit type information for return values and parameters, and (3) clear cardinality specifications.

The issue specifically calls out several functions lacking adequate documentation: `elementDefinition`, `checkModifiers`, `subsumedBy`, `htmlChecks`, `weight`, `%terminology.*`, `%factory.*`, `%server.*`, `hasValue`, and `toString`. The reporter notes these are just the functions encountered in a first pass review, suggesting more may need attention.

This is a documentation quality and implementer experience issue - without clear examples and type specifications, implementers must guess at expected behavior, leading to inconsistent implementations.

## Current State

The FHIRPath page (https://hl7.org/fhir/6.0.0-ballot4/fhirpath.html) currently has inconsistent documentation across functions:
- Some functions have detailed examples with expected outputs
- Others have minimal or no examples
- Type information for parameters and return values is often implicit or missing
- Cardinality of inputs (singleton vs collection) is not consistently documented

This inconsistency becomes particularly problematic as FHIRPath moves toward normative status in R6, where implementers need precise specifications.

## Stakeholder Perspectives

**Reporter (Brian Postlethwaite)**: As a FHIRPath implementer (Firely .NET FHIR library), Brian has direct experience with the documentation gaps causing implementation challenges. No comments on the issue yet, but his perspective represents implementers who need clear specifications.

No other stakeholders have commented on this issue yet.

## Related Issues & Discussions

- **FHIR-53954**: %factory and %server maturity concerns (same reporter)
- **FHIR-53960**: Inconsistent error handling patterns (same reporter)
- **FHIR-53953**: Remote interactions documentation (same reporter)
- **FHIR-54074**: %server normative readiness
- **FHIR-54078**: Type Factory normative readiness

These related issues from the same ballot cycle all address FHIRPath documentation and specification quality, suggesting a coordinated review of the FHIRPath page is needed.

**Zulip**: Limited direct discussion found, though FHIRPath topics regularly arise in #fhirpath and #implementers streams around validation and error handling questions - often stemming from unclear documentation.

## Technical Considerations

1. **Normative implications**: R6 is expected to make FHIRPath normative. Incomplete documentation now becomes locked-in specification gaps.

2. **Implementation consistency**: Without explicit type/cardinality information, different implementations may make different assumptions, causing interoperability issues.

3. **Testing coverage**: Clear examples enable comprehensive test suites across implementations.

4. **Terminology functions**: The `%terminology.*` functions involve remote service calls - type information is especially critical for error handling.

5. **Extension handling**: The `toString` function behavior with extensions needs clarification for proper data transformation.

## Potential Courses of Action

### Option A: Comprehensive Documentation Update
- **Description**: Accept as persuasive and systematically document all functions with examples, types, and cardinality
- **Pros**: 
  - Provides complete implementer guidance
  - Enables consistent implementations
  - Supports normative quality standards
- **Cons**: 
  - Significant documentation effort
  - May delay ballot resolution
  - Some behaviors may need WG decisions before documenting
- **Impact**: Non-substantive (documentation only)

### Option B: Phased Documentation with Priority Functions
- **Description**: Prioritize documentation for normative-track functions; defer maturity-0 functions (%factory, %server) to incubator
- **Pros**: 
  - Focuses effort on critical normative content
  - Aligns with related issues suggesting %factory/%server aren't ready
  - More achievable timeline
- **Cons**: 
  - Still leaves some gaps
  - May need coordination with FHIR-53954 resolution
- **Impact**: Non-substantive (documentation only)

### Option C: Document Minimum + Establish Documentation Template
- **Description**: Create documentation template/standard, apply to highest-priority functions, track remainder
- **Pros**: 
  - Establishes ongoing quality standard
  - Achievable in ballot timeline
  - Creates framework for continuous improvement
- **Cons**: 
  - Doesn't fully address immediate need
  - Requires follow-up tracking
- **Impact**: Non-substantive (documentation only)

## Questions for the Workgroup

1. What is the minimum documentation standard required for normative FHIRPath functions?

2. Should documentation improvements be tied to the resolution of FHIR-53954 (moving %factory/%server to incubator)?

3. Are there any functions where the expected behavior is still undecided and needs WG resolution before documentation?

4. Should a formal documentation template be established for FHIRPath functions?

5. Who will be responsible for creating the documentation - can this be a community effort?

## References

- [FHIR-53951 Jira Issue](https://jira.hl7.org/browse/FHIR-53951)
- [FHIRPath Specification Page](https://hl7.org/fhir/6.0.0-ballot4/fhirpath.html)
- Related: [FHIR-53954](https://jira.hl7.org/browse/FHIR-53954), [FHIR-53960](https://jira.hl7.org/browse/FHIR-53960), [FHIR-53953](https://jira.hl7.org/browse/FHIR-53953)
