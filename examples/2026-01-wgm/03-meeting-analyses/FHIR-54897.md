# FHIR-54897: Grouping Laboratory Results

## Issue Overview

This issue expresses a preference for how laboratory panels should be represented in FHIR. The submitter (Kathy Walsh) prefers having panels reported as DiagnosticReport with multiple DiagnosticReports for items ordered on the same requisition included together in a bundle.

If DiagnosticReport cannot be used for panels, the submitter suggests:
1. Creating a new grouper resource called "Panel"
2. If not a new resource, then using a grouper observation with a data absent reason of "Grouper" instead of the Observation.organizer indicator

This issue is part of a broader ongoing debate in FHIR about how to represent laboratory panels (like CBC, Chem-7, etc.) where the panel itself doesn't have a result value but serves to group related observations.

## Current State

Currently, FHIR offers several approaches to laboratory panel representation:

1. **DiagnosticReport → Observations**: DiagnosticReport.result points to multiple Observation resources (flat structure)
2. **Observation Grouper**: An Observation with hasMember references to other Observations, where the grouper has no value (uses dataAbsentReason)
3. **DiagnosticReport with Composition**: For document-style reports, especially in European contexts

There is active discussion in the Orders and Observations workgroup about which approach should be recommended. FHIR-54562 proposes adding an `.organizer` indicator to Observation to clarify when an Observation is serving as a grouper.

FHIR-55019 proposes adding List as a choice for DiagnosticReport.result to serve as the grouper.

## Stakeholder Perspectives

**Kathy Walsh** (Reporter): Prefers DiagnosticReport for panels; suggests creating a Panel resource or using data absent reason "Grouper" if Observation is used.

**From Related Zulip Discussions:**

**Riki Merrick** (O&O): Seeking implementer input on two options:
- Option A: Observation as grouper via hasMember
- Option B: DiagnosticReport representing one ordered panel

**Andrea Pitkus**: Extensive commentary arguing against using Observation as grouper:
- "Observation is supposed to be an observation thus should have a value"
- Panel orders have specific regulatory implications in the US (CLIA, CMS/HHS)
- Need to retain which results belong to which panels for reflex testing and susceptibility results
- Suggested using ServiceRequest for orders and linking results back

**Hans Buitendijk** (FHIR-54562): 
- DiagnosticReport provides scope of report, not the panel grouping
- Observation should have values; groupers shouldn't be Observations
- Suggested using Group or List for grouping

**Michele Mottini**: "Our server always represents panels as DiagnosticReport"

**Marcel Hanselmann**: "The grouper of laboratory results should be the observation" with hasMember

## Related Issues & Discussions

- **FHIR-54562**: "Diagnostic Reporting Grouping" - Proposes adding .organizer to Observation (OO workgroup)
- **FHIR-55019**: "Add List resource as a 'result' choice for grouping of observation panels" (OO workgroup)
- **FHIR-55020**: "Add additional status values to List to support Observation grouping" (FHIR-I, companion to FHIR-55019)
- **FHIR-47052**: "DiagnosticReport - Observation structure" (Lab Report IG)
- [Zulip: implementers > Laboratory Report - Representing Panels](https://chat.fhir.org/#narrow/stream/implementers/topic/Laboratory%20Report%20-%20Representing%20Panels)
- [Zulip: Orders and Observation WG > Usage of panel of Observations](https://chat.fhir.org/#narrow/stream/179256-Orders-and-Observation-WG/topic/Usage.20of.20panel.20of.20Observations)

## Technical Considerations

1. **Semantic Purity**: Should Observation only be used for things that have values? Using Observation as a grouper is seen by some as a misuse of the resource.

2. **Flat vs Hierarchical**: US implementations tend to favor flat structures (DiagnosticReport → Observations); international/EU implementations sometimes prefer hierarchical grouping.

3. **Query Implications**: How you group affects how you query. Querying for "all hemoglobin results" is different if panels are nested vs flat.

4. **Reflex Testing**: Complex scenarios like microbiology cultures with susceptibility panels require clear grouping to know which antibiotic susceptibilities apply to which organism.

5. **Regulatory Requirements**: US has CLIA/CMS regulations around panel definitions; panels are tied to reimbursement.

6. **Resource Proliferation**: Creating a new "Panel" resource may not be desirable given FHIR's resource count.

## Potential Courses of Action

### Option A: Maintain Status Quo with Guidance
- **Description**: Don't change core resources; provide clearer guidance in documentation and IGs about when to use which approach
- **Pros**: No breaking changes; allows flexibility for different jurisdictions
- **Cons**: Continued fragmentation; implementers remain confused
- **Impact**: Non-substantive documentation

### Option B: Add List as DiagnosticReport.result Choice (FHIR-55019/55020)
- **Description**: Allow List to be used as a grouper within DiagnosticReport results
- **Pros**: Clear semantic distinction between grouper and results; List is designed for grouping
- **Cons**: New pattern for existing implementers; requires List enhancements
- **Impact**: Compatible, substantive change

### Option C: Add Observation.organizer Flag (FHIR-54562)
- **Description**: Add an indicator to Observation to mark it as a grouper
- **Pros**: Works with existing patterns; explicit about intent
- **Cons**: Still uses Observation for non-observations; some see this as wrong semantically
- **Impact**: Compatible, substantive change

### Option D: Create Panel Resource
- **Description**: Create a new Panel resource specifically for grouping
- **Pros**: Clean semantic separation; clear purpose
- **Cons**: Resource proliferation; migration cost; significant new work
- **Impact**: Major change; new resource

### Option E: Use DataAbsentReason Code for Grouper
- **Description**: Define a new dataAbsentReason value "grouper" to indicate the Observation is a grouper
- **Pros**: Minimal change; uses existing mechanisms
- **Cons**: Somewhat of a hack; "grouper" isn't really a reason data is absent
- **Impact**: Terminology change only

## Questions for the Workgroup

1. Is this primarily an O&O issue that FHIR-I is being consulted on, or does FHIR-I have direct authority here?

2. Should FHIR prescribe a single approach, or continue allowing multiple patterns?

3. Is Observation fundamentally wrong for grouping, or is it acceptable with clear documentation?

4. How should this coordinate with FHIR-55019/FHIR-55020 (List as grouper) and FHIR-54562 (Observation.organizer)?

5. What guidance exists in IHE LAB or other profiles that should be considered?

## References

- [FHIR-54897 Jira Issue](https://jira.hl7.org/browse/FHIR-54897)
- [FHIR-54562 - Diagnostic Reporting Grouping](https://jira.hl7.org/browse/FHIR-54562)
- [FHIR-55019 - Add List as result choice](https://jira.hl7.org/browse/FHIR-55019)
- [FHIR-55020 - Add status values to List](https://jira.hl7.org/browse/FHIR-55020)
- [DiagnosticReport Resource](https://build.fhir.org/diagnosticreport.html)
- [Observation Resource](https://build.fhir.org/observation.html)
- [Zulip: Laboratory Report - Representing Panels](https://chat.fhir.org/#narrow/stream/implementers/topic/Laboratory%20Report%20-%20Representing%20Panels)
