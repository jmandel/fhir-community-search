# FHIR-54748: ExampleScenario.actor overlaps with ActorDefinition

## Issue Overview

This ballot comment argues that the ExampleScenario.actor backbone element substantially duplicates functionality that exists in the ActorDefinition resource. The commenter suggests removing the actor section from ExampleScenario entirely and replacing it with a required link to ActorDefinition.

This is a significant structural change proposal that would affect how ExampleScenario documents actors in example workflows.

## Current State

### ExampleScenario.actor (Current)
```
actor 0..* BackboneElement
  key 1..1 string (identifier within scenario)
  type 1..1 code (person | system)  
  title 1..1 string (human-readable name)
  description 0..1 markdown
  definition 0..1 canonical(ActorDefinition) [Added in R5/R6]
```

### ActorDefinition Resource
```
ActorDefinition (Resource)
  type 1..1 code (person | system)
  name 0..1 string
  title 0..1 string
  description 0..1 markdown
  capabilities 0..* canonical(CapabilityStatement)
  ... (many more elements)
```

### Overlap Analysis
- `type` - duplicated
- `title` - duplicated  
- `description` - duplicated
- ExampleScenario.actor.definition already CAN reference ActorDefinition

### History
- FHIR-41225 (Applied, R5): Added `actor.definition` to link to ActorDefinition
- FHIR-43649 (Not Persuasive): Earlier request to "refer to ActorDefinition" was resolved as already done via FHIR-41225

## Stakeholder Perspectives

**Bas van den Heuvel (Reporter)**: Sees the duplication as unnecessary and proposes removing the backbone in favor of required ActorDefinition references.

**Prior decisions**: The workgroup previously chose to ADD the definition element rather than REPLACE the backbone, allowing scenarios to work without external ActorDefinition resources.

## Related Issues & Discussions

### Related Jira Issues  
- **FHIR-41225** (Applied): Added actor.definition as canonical(ActorDefinition) - chose to add, not replace
- **FHIR-43649** (Resolved - No Change): Similar request, pointed to FHIR-41225
- **FHIR-43648** (Applied): ValueSet alignment between ExampleScenario-actor-type and ActorDefinition
- **FHIR-54694**: Related - requests adding OperationDefinition reference to ExampleScenario
- **FHIR-54704**: Related - requests ActorDefinition profile references

### Design Philosophy
ExampleScenario was designed to be self-contained for simpler use cases while allowing references for formal linkage when needed.

## Technical Considerations

1. **Self-Contained vs Referenced**:
   - Current: ExampleScenario can be self-contained (simple) or reference ActorDefinitions (formal)
   - Proposed: All scenarios must have separate ActorDefinition resources (more complex)

2. **Authoring Burden**:
   - Current: Simple scenarios need only ExampleScenario
   - Proposed: Must create ActorDefinition resources even for trivial "Client"/"Server" actors

3. **Package/Publishing Impact**:
   - Current: Single resource captures scenario
   - Proposed: Scenarios require accompanying ActorDefinitions

4. **Consistency Argument**:
   - If ActorDefinition exists, duplicating its elements seems wasteful
   - But ExampleScenario predates ActorDefinition

5. **Migration**:
   - Would be breaking change for existing ExampleScenarios
   - Would need actor backbone â†’ ActorDefinition + reference migration

6. **Precedent**:
   - Similar patterns exist elsewhere (e.g., Questionnaire has inline items vs external references)
   - Not all cases require factoring out to separate resources

## Potential Courses of Action

### Option A: Remove actor Backbone, Require ActorDefinition Reference
- **Description**: Remove ExampleScenario.actor backbone elements (except key), require definition as 1..1 canonical(ActorDefinition)
- **Pros**: Eliminates duplication; promotes reuse; aligns with ActorDefinition-centric model
- **Cons**: Breaking change; increases authoring burden; complicates simple scenarios
- **Impact**: High - breaking structural change

### Option B: Deprecate Inline Properties, Keep Structure
- **Description**: Deprecate type/title/description in actor backbone; promote using definition; keep backward compatibility
- **Pros**: Gradual transition; non-breaking; encourages best practice
- **Cons**: Doesn't eliminate duplication; may create inconsistent usage
- **Impact**: Medium - deprecation with guidance

### Option C: Make definition Mutually Exclusive with Inline
- **Description**: Add constraint that actor must have EITHER definition OR inline elements, not both
- **Pros**: Clear either/or choice; allows simple and formal paths; validates against redundancy
- **Cons**: Doesn't reduce duplication in spec; complex constraint
- **Impact**: Medium - validation rule addition

### Option D: Not Persuasive - Keep Current Design
- **Description**: Maintain current design where definition is optional and inline elements provide self-contained option
- **Pros**: Non-breaking; supports both simple and complex use cases; respects prior decisions
- **Cons**: Duplication remains; potential for inconsistent data
- **Impact**: None - status quo

## Questions for the Workgroup

1. What was the rationale for adding definition as optional rather than replacing the backbone in FHIR-41225?

2. Is the self-contained scenario use case (no external ActorDefinitions) important to preserve?

3. How many existing IGs use ExampleScenario, and what would migration impact look like?

4. Should there be guidance about when to use inline vs referenced actors?

5. Does the answer change now that ActorDefinition is more mature than when these decisions were made?

6. Is this part of a broader question about ExampleScenario's design (see also FHIR-54694)?

## References

- Jira Issue: https://jira.hl7.org/browse/FHIR-54748
- ExampleScenario: https://hl7.org/fhir/6.0.0-ballot4/examplescenario.html
- ActorDefinition: https://hl7.org/fhir/6.0.0-ballot4/actordefinition.html
- Added actor.definition: https://jira.hl7.org/browse/FHIR-41225
- Prior similar request: https://jira.hl7.org/browse/FHIR-43649
