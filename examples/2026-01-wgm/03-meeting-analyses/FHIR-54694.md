# FHIR-54694: Add reference to OperationDefinition to ExampleScenario

## Issue Overview

This ballot comment requests adding a reference to OperationDefinition within ExampleScenario, similar to how ExampleScenario.actor.definition already references ActorDefinition canonicals.

The use case is that when documenting example scenarios that involve FHIR operations, it should be possible to formally link to the operation definition being demonstrated, rather than just describing it textually.

## Current State

ExampleScenario currently has:
- `actor.definition` - canonical(ActorDefinition) - references formal actor definitions
- `process.step.operation` - backbone element describing an operation step
  - Has `type`, `title`, `description`, but no formal link to OperationDefinition

The request is to add:
- `ExampleScenario.process.step.operation.definition` - Canonical(OperationDefinition)

This would allow scenarios to reference operations like $validate, $expand, $convert, etc. formally.

## Stakeholder Perspectives

**Anja Schwab (Reporter)**: Sees this as natural extension of the pattern already established for ActorDefinition. Would enable more precise scenario documentation.

No comments on the issue yet.

## Related Issues & Discussions

### Related Jira Issues
- **FHIR-41225** (Applied): Added ExampleScenario.actor.definition canonical(ActorDefinition) - establishes the precedent
- **FHIR-54748**: Suggests ExampleScenario.actor overlaps with ActorDefinition and should be removed (conflicting direction)
- **FHIR-43648** (Applied): ValueSet alignment for ExampleScenario-actor-type based on ActorDefinition

### Pattern Established
The actor.definition element was added in R5/R6 to allow formal linking to ActorDefinition resources. This request follows the same pattern for operations.

## Technical Considerations

1. **Consistency**: Adding operation.definition follows the pattern established for actor.definition

2. **Element Structure**: Current operation backbone has:
   - `type` (Coding) - GET/POST/PUT/DELETE/etc.
   - `title` (string)
   - `initiator` / `receiver` (string)
   - `description` (markdown)
   - `initiatorActive` / `receiverActive` (boolean)
   - `request` / `response` (ExampleScenario.instance reference)

3. **Cardinality Question**: Should definition be 0..1 (optional formal reference) or have relationship to type?

4. **Scope Question**: OperationDefinition covers named operations ($validate) - does "operation" in ExampleScenario include basic REST operations that wouldn't have OperationDefinitions?

5. **Migration**: No migration impact - new optional element

## Potential Courses of Action

### Option A: Add operation.definition as Canonical(OperationDefinition)
- **Description**: Add `ExampleScenario.process.step.operation.definition` as 0..1 Canonical(OperationDefinition)
- **Pros**: Consistent with actor pattern; enables formal operation references; non-breaking
- **Cons**: Only applies to named operations, not basic REST; may add complexity
- **Impact**: Low - additive change

### Option B: Add broader definition supporting multiple types
- **Description**: Add definition as Canonical(OperationDefinition | CapabilityStatement) to support both operations and capability references
- **Pros**: More flexible; could reference specific capabilities being demonstrated
- **Cons**: More complex; may be overengineered for use case
- **Impact**: Medium - requires defining semantics for multiple target types

### Option C: Defer pending ExampleScenario review
- **Description**: Given FHIR-54748 suggests reconsidering ExampleScenario structure entirely, defer this until that discussion concludes
- **Pros**: Avoids potentially throwaway work; considers broader redesign
- **Cons**: Delays useful enhancement; may not need broader redesign
- **Impact**: None immediately - deferred

### Option D: Not Persuasive - Use description field
- **Description**: Reject request; operations can be described in the description markdown field with links
- **Pros**: No spec change needed; already possible informally
- **Cons**: Not machine-processable; inconsistent with actor pattern
- **Impact**: None - status quo

## Questions for the Workgroup

1. Does the actor.definition pattern justify adding operation.definition?

2. Should this be limited to OperationDefinition or allow other target types?

3. How does this interact with FHIR-54748's suggestion to reconsider ExampleScenario.actor structure?

4. What's the relationship between operation.type (REST verb) and operation.definition (named operation)?

5. Are there implementation guides already using ExampleScenario that would benefit from this?

## References

- Jira Issue: https://jira.hl7.org/browse/FHIR-54694
- ExampleScenario: https://hl7.org/fhir/6.0.0-ballot4/examplescenario.html
- Related (actor.definition): https://jira.hl7.org/browse/FHIR-41225
- Related (actor overlap): https://jira.hl7.org/browse/FHIR-54748
