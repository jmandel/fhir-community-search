# FHIR-53722: Deprecated elements should be withdrawn where applicable in R6

## Issue Overview

James Jahns raises a fundamental question about deprecated elements in FHIR R6: if elements were marked as deprecated in previous versions (or were Trial Use), why are they still present in R6 which is intended for normativity?

The reporter argues that maintaining deprecated elements in a new major version:
1. Creates implementation burden (models must support elements that shouldn't be used)
2. Sends mixed signals ("deprecated" but still normatively defined)
3. Contradicts the stated policy for element deprecation and withdrawal

The ticket provides a comprehensive list of deprecated elements that remain in R6 ballot 4, suggesting they should either be removed or have their deprecation status reconsidered.

## Current State

The following elements remain in R6 with deprecation status (per the reporter's analysis):

| Element | Notes |
|---------|-------|
| Bundle.signature | Being replaced by Provenance-based signatures |
| ActivityDefinition.topic | |
| CodeSystem.topic | |
| ConceptMap.topic | |
| EventDefinition.topic | |
| Library.topic | |
| Measure.topic | |
| Measure.guidance | |
| Measure.subject[x] | |
| MetadataResource.topic | |
| NamingSystem.topic | |
| Observation.bodySite | Was Trial Use or deprecated in R5 |
| OperationOutcome.issue.location | |
| PlanDefinition.topic | |
| ServiceRequest.specimen | |
| StructureDefinition.keyword | |
| ValueSet.topic | |

**Note**: The deprecation flag isn't being rendered in R6 ballot StructureDefinitions, though descriptions still indicate deprecation. This makes it harder to identify all deprecated elements.

Per https://hl7.org/fhir/versions.html#deprecation, Trial Use elements can be withdrawn in the next major version.

## Stakeholder Perspectives

**Reporter (James Jahns):** Argues for consistency - deprecated elements should be removed in a major version that's targeting normativity. Having deprecated elements in normative spec seems contradictory.

No other comments have been posted yet.

## Related Issues & Discussions

### Related Patterns
- **Bundle.signature**: Active discussion about deprecating in favor of Provenance-based signatures (see FHIR-53810 and related signature issues)
- **topic elements**: Multiple resources have deprecated `topic` element
- **OperationOutcome.issue.location**: Replaced by `expression` in modern usage

### Zulip Discussions
- Signature discussions mention deprecating Bundle.signature in favor of Provenance
- General discussions about deprecation lifecycle and when elements should be removed

## Technical Considerations

1. **Normative Commitment**: Once R6 is normative, these deprecated elements become normatively defined, making future removal harder

2. **Backward Compatibility**: Removing deprecated elements breaks existing content that uses them

3. **Migration Path**: Users of deprecated elements need clear guidance on alternatives

4. **Implementation Impact**: Every deprecated element requires implementation support (serialization, validation, etc.)

5. **Deprecation Rendering**: The fact that deprecation flags aren't rendering correctly in R6 ballot is itself a problem

6. **Individual Assessment**: Each element needs individual review - some deprecations may no longer be appropriate

7. **Observation.bodySite**: The reporter notes this may be an exception (FMM status differs from others)

## Potential Courses of Action

### Option A: Remove All Deprecated Elements
- **Description**: Remove all elements marked as deprecated, requiring users to migrate to alternatives
- **Pros**: 
  - Clean normative spec
  - No mixed signals about element status
  - Reduced implementation burden
- **Cons**: 
  - Breaking change for existing content
  - May not have adequate migration path for all elements
  - Short timeline before R6 release
- **Impact**: High disruption, clean result

### Option B: Selective Removal Based on Migration Readiness
- **Description**: Remove deprecated elements that have clear, well-documented alternatives; retain others with plan for future removal
- **Pros**: 
  - Balances cleanup with migration readiness
  - Allows case-by-case assessment
  - Reduces risk
- **Cons**: 
  - Inconsistent approach
  - Still leaves some deprecated elements
  - Requires individual evaluation
- **Impact**: Medium disruption, pragmatic approach

### Option C: Retain but Enhance Deprecation Documentation
- **Description**: Keep deprecated elements but ensure deprecation is clearly rendered, document alternatives, and commit to removal in R7
- **Pros**: 
  - No breaking changes in R6
  - Clear future direction
  - Time for migration
- **Cons**: 
  - Kicks can down road
  - Normatively defines things we don't want used
  - Continues mixed signals
- **Impact**: Low disruption, defers problem

### Option D: Reconsider Deprecation Status
- **Description**: For each element, reconsider whether deprecation is still appropriate. Some may be un-deprecated.
- **Pros**: 
  - Evidence-based decision making
  - May reveal elements that should be retained
  - Addresses rendering bug as well
- **Cons**: 
  - Requires work to evaluate each element
  - May result in inconsistent outcomes
  - Deprecation decisions had reasons
- **Impact**: Medium effort, uncertain outcome

### Option E: Define "Legacy" Category
- **Description**: Create a formal "legacy" status distinct from deprecated - elements that are normatively stable but not recommended for new implementations
- **Pros**: 
  - Clearer semantics than "deprecated but normative"
  - Allows stability commitment while discouraging use
  - New concept that fits the situation
- **Cons**: 
  - Adds complexity to lifecycle model
  - May seem like word games
  - Doesn't reduce implementation burden
- **Impact**: Conceptual change, may clarify situation

## Questions for the Workgroup

1. What is the intended lifecycle for deprecated elements in normative versions?

2. For each deprecated element, is there a documented migration path to alternatives?

3. Why aren't deprecation flags rendering in R6 ballot StructureDefinitions? Is this a bug or intentional?

4. Should Bundle.signature be removed given the active work on Provenance-based signatures?

5. Are there implementations heavily dependent on any of these deprecated elements?

6. Is there time in the R6 schedule to properly evaluate and remove deprecated elements?

7. Should we have a formal policy that deprecated elements MUST be removed in the next major version?

## References

- Jira: https://jira.hl7.org/browse/FHIR-53722
- FHIR Version lifecycle: https://hl7.org/fhir/versions.html#deprecation
- Bundle.signature discussion: Related to FHIR-53810 and signature issues
- R6 ballot: https://hl7.org/fhir/6.0.0-ballot4/
